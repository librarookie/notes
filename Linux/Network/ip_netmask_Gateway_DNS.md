# IP地址、子网掩码、网关、DNS的介绍

</br>
</br>

## 概念

- `客户端`：应用 `C/S`（客户端/服务器） `B/S`（浏览器/服务器）;
- `服务器`：客户端提供服务、数据、资源的机器;
- `请求`：客户端向服务器索取数据;
- `响应`：服务器对客户端请求作出反应，一般是返回给客户端数据;
- `URL`：统一资源定位符（Uniform Resource Locator）, 网络中每一个资源都对应唯一的地址——URL;
- `MAC地址`：MAC（Media Access Control，介质访问控制）地址，又称物理地址, 如同我们身份证上的身份证号码，具有全球唯一性;
- `IP`：网络互连协议（Internet Protocol），是TCP/IP体系中的网络层协议;
- `子网掩码`：子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩;
- `网关`：网关(Gateway)又称网间连接器、协议转换器。网关在传输层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连;
- `DNS`：域名系统(Domain Name System)，为Internet上的主机分配域名地址的IP地址;
- `DHCP`：由服务器控制一段IP地址范围，客户机登录服务器时就可以自动获得服务器分配的IP地址和子网掩码。提升地址的使用率;

</br>

## IP地址

> IP（网络之间互连的协议）它是能使连接到网上的所有计算机网络实现相互通信的一套规则，规定了计算机在因特网上进行通信时应当遵守的规则。任何厂家生产的计算机系统，只要遵守IP协议就可以与因特网互连互通。IP地址有唯一性，即每台机器的IP地址在全世界是唯一的。这里指的是网络上的真实IP它是通过本机IP地址和子网掩码的"与"运算然后再通过各种处理算出来的；

- tcp/ip协议

TCP/IP（Transmission Control Protocol/Internet Protocol，传输控制协议/网际协议），也叫作网络通讯协议，是指能够在多个不同网络间实现信息传输的协议簇。TCP/IP协议不仅仅指的是TCP 和IP两个协议，而是指一个由FTP、SMTP、TCP、UDP、IP等协议构成的协议簇， 只是因为在TCP/IP协议中TCP协议和IP协议最具代表性，所以被称为TCP/IP协议。

- 所谓IP地址就是给每个连接在Internet上的主机分配的一个32bit地址。按照TCP/IP协议规定，IP地址用二进制来表示，每个IP地址长32bit，比特换算成字节，就是4个字节。例如一个采用二进制形式的IP地址是“00001010000000000000000000000001”，这么长的地址，人们处理起来也太费劲了。为了方便人们的使用，IP地址经常被写成十进制的形式，中间使用符号“.”分开不同的字节。于是，上面的IP地址可以表示为“10.0.0.1”。IP地址的这种表示法叫做“点分十进制表示法”，这显然比1和0容易记忆得多。

</br>

## 子网掩码

> 互联网是由许多小型网络构成的，每个网络上都有许多主机，这样便构成了一个有层次的结构。IP地址在设计时就考虑到地址分配的层次特点，将每个IP地址都分割成网络号和主机号两部分，以便于IP地址的寻址操作;</br>
> 子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩；子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分；子网掩码不能单独存在，它必须结合IP地址一起使用。

- 常用子网掩码

1. 子网掩码“255.255.255.0”的网络：
   1. 最后面一个数字可以在0~255范围内任意变化，因此可以提供256个IP地址。但是实际可用的IP地址数量是256-2，即254个，因为主机号不能全是“0”或全是“1”。
2. 子网掩码“255.255.0.0”的网络：
   1. 后面两个数字可以在0~255范围内任意变化，可以提供256²个IP地址。但是实际可用的IP地址数量是256²-2，即65534个。

Tips:

1. IP地址的子网掩码设置不是任意的，应该根据网络的规模进行设置;
2. 如果将子网掩码设置过大，也就是说子网范围扩大，那么，根据子网寻径规则，很可能发往和本地主机不在同一子网内的目标主机的数据，会因为错误的判断而认为目标主机是在同一子网内，导致数据包将在本子网内循环，直到超时并抛弃，使数据不能正确到达目标主机，导致网络传输错误；
3. 如果将子网掩码设置得过小，那么就会将本来属于同一子网内的机器之间的通信当做是跨子网传输，数据包都交给缺省网关处理，这样势必增加缺省网关的负担，造成网络效率下降;

</br>

## 网关

> 网关(Gateway)又称网间连接器、协议转换器。网关在传输层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关既可以用于广域网互连，也可以用于局域网互连。 网关是一种充当转换重任的计算机系统或设备。在使用不同的通信协议、数据格式或语言，甚至体系结构完全不同的两种系统之间，网关是一个翻译器。与网桥只是简单地传达信息不同，网关对收到的信息要重新打包，以适应目的系统的需求。同时，网关也可以提供过滤和安全功能。

</br>

## DNS

- DNS服务器

> 域名服务器(Domain Name Server)。在Internet上域名与IP地址之间是一一对应的，域名虽然便于人们记忆，但机器之间只能互相认识IP地址，它们之间的转换工作称为域名解析，域名解析需要由专门的域名解析服务器来完成，DNS就是进行域名解析的服务器;

国内DNS推荐： `114.114.114.114` / `114.114.114.115`

更多DNS参考： <https://blog.csdn.net/qq_14989227/article/details/78342237>

## IP与子网掩码换算

1. case 1
    - 如果要使这三个ip段在同一个网段内，那么这个大网段共同的子网掩码是多少呢？

        ```md
        ip段一：192.168.0.1——192.168.0.254

        ip段二：192.168.1.1——192.168.1.254

        ip段三：192.168.2.1——192.168.2.254
        ```

    - 我们来分析下：

        ```md
        # 将ip地址192.168.0.1转换为二进制
        11000000 10101000 00000000 0000000

        # 将ip地址192.168.1.1转换为二进制
        11000000 10101000 00000001 00000001

        # 将ip地址192.168.2.1转换为二进制
        11000000 10101000 00000010 00000001

        转换成了二进制，可以看得出，三个ip段的二进制前面 `22` 位的是不变的，那么可以将他们表示成：

        ip段一：192.168.0.1/22
        ip段二：192.168.1.1/22
        ip段三：192.168.2.1/22

        这种192.168.2.x/22形式的ip地址相信大家平时都见过，就是已经告诉了子网掩码了。
        也就是说他们共同的子网掩码二进制前面22个都是1。

        11111111 11111111 11111100 00000000
        ```

　　- 结果
        转换成十进制，那就是255.255.252.0，所以他们共同的子网掩码就是`255.255.252.0`。

</br>
</br>

Reference

- <https://zhuanlan.zhihu.com/p/65226634>
- <https://blog.csdn.net/weixin_39676242/article/details/110257459>
